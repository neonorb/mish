// Mish grammar file

#include "group"

#include "whitespace"

// symbol
DEFSWITCH(symbolfirstchar, letters, underscore, at)
DEFSWITCH(symbolrestcharoptions, letters, underscore, at, digits)
DEFVARIABLE(symbolrestchar, symbolrestcharoptions)
DEFLITERAL(symbol, N(first,symbolfirstchar), N(rest,symbolrestchar))

// type
FDEF(type)
DEFLITERAL(generic, U(opentriangle), U(type), U(closetriangle))
DEFOPTIONAL(genericoptional, generic)
DEFLITERAL(type, N(type,symbol), N(generic,genericoptional))

FDEF(expression)
FDEF(block)

#include "literal"

// function call
DEFLITERAL(funcall, N(function,symbol), U(colon), U(optionalwhitespace), N(argument,expression))

#include "expression"

#include "statement"

// body
DEFSWITCH(statementterm, requirewhitespace,semicolon)
DEFLITERAL(bodystatement, N(statement,statement), U(statementterm))
DEFVARIABLE(body, bodystatement)

// block
DEFLITERAL(block, U(openbrace), U(optionalwhitespace), N(body,body), U(closebrace))